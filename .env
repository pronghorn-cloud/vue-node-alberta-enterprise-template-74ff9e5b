# =============================================================================
# Environment Configuration - Development
# =============================================================================
# This is a template for local development with mock authentication.
# Copy this file to .env and adjust values as needed.
#
# For production deployments, use:
# - .env.internal.example for Microsoft Entra ID (internal users)
# - .env.external.example for SAML 2.0 (external users)
#
# Validate configuration: npm run validate-env
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
#NODE_ENV=development
NODE_ENV=production

PORT=3000
APP_NAME=Alberta Government Enterprise Template


# -----------------------------------------------------------------------------
# Database (PostgreSQL) - Azure PostgreSQL Standard Compliant
# -----------------------------------------------------------------------------
# Connection string format: postgresql://username:password@host:port/database?sslmode=require
# For Azure PostgreSQL Flexible Server, use SSL with certificate validation

# Connection string (required)
DB_CONNECTION_STRING=postgresql://vue_node_alberta_enterprise_template_mq9d_user:MaEtZcyNa5aDUArHtPS4OWBDnpUqER0i@dpg-d60fa0vgi27c73c01k2g-a.oregon-postgres.render.com:5432/vue_node_alberta_enterprise_template_mq9d?sslmode=require



# Connection pool configuration (Azure standard requirements)
DB_POOL_MIN=2                    # Minimum pool size (default: 2)
DB_POOL_MAX=10                   # Maximum pool size (default: 10)
DB_IDLE_TIMEOUT=30000            # Idle connection timeout in ms (default: 30000)
DB_CONNECTION_TIMEOUT=5000       # Connection timeout in ms (default: 5000)
DB_STATEMENT_TIMEOUT=30000       # Statement timeout in ms (default: 30000)

# SSL/TLS configuration (Azure standard: MUST use TLS 1.2+ in production)
# For local development, set to false. For production, MUST be true.
DB_SSL_REJECT_UNAUTHORIZED=false # Set to 'true' in production (certificate validation)

# Metrics and monitoring
DB_ENABLE_METRICS=false          # Enable pool metrics collection (auto-enabled in production)

# -----------------------------------------------------------------------------
# Session Management
# -----------------------------------------------------------------------------
# For production, generate a secure random string:
# openssl rand -base64 32
SESSION_SECRET=dev-secret-change-in-production-minimum-32-characters
SESSION_STORE=postgres
SESSION_MAX_AGE=86400000
SESSION_COOKIE_SAME_SITE=lax
# SESSION_COOKIE_SECURE will be auto-set based on NODE_ENV

# -----------------------------------------------------------------------------
# Authentication - Mock Driver (Development)
# -----------------------------------------------------------------------------
AUTH_DRIVER=mock
AUTH_CALLBACK_URL=http://localhost:3000/api/v1/auth/callback

# For SAML or Entra ID, see:
# - .env.internal.example (Entra ID)
# - .env.external.example (SAML)

# -----------------------------------------------------------------------------
# Frontend
# -----------------------------------------------------------------------------
WEB_URL=http://localhost:5173
CORS_ORIGIN=http://localhost:5173
CORS_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Rate limiting - max requests per 15 minutes per IP
RATE_LIMIT_MAX=10000
AUTH_RATE_LIMIT_MAX=100

# Content Security Policy
# HELMET_CSP=false

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
LOG_FORMAT=dev
LOG_PII=true

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_ANALYTICS=true
FEATURE_HEALTH_CHECK=true
